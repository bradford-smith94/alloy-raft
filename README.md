#Alloy Model of the Raft Consensus Algorithm
An attempt at creating a simple model of the Raft Consensus Algorithm in
[Alloy](http://alloy.mit.edu/alloy/).

##Raft
The [Raft Consensus Algorithm](https://raft.github.io/) is designed to be an
easy to understand distributed consensus algorithm. There is a great
visualization of how it operates at
[thesecretlivesofdata.com/raft/](http://thesecretlivesofdata.com/raft/).

##My Model
As it currently stands this model breaks time into two categories:

- States
- Terms

A State is essentially a clock tick, some unit of time to break down the model
by. While a Term is essentially the lifetime of a leader Node (almost analogous
to Raft's definition of a Term with the exception that the model doesn't handle
elections at this time).

States may also hold messages from the leader of the current Term. These
messages are just a single value that all follower Nodes should update to.

###Storing and Updating Values
Nodes currently store a single value (rather than the log in Raft) as an
integer. The update process for the model currently specifies that at some time
the leader is updated to a value and sends out a message telling follower Nodes
to update to that value. If and only if a Node receives a message from a leader
to change to a value then may a Node change to that value.

###Issues
Alloy's lack of an assignment operator makes defining an 'Update' the way I have
attempted it quite difficult. It may even be impossible to properly model an
update without significant changes to these constraints.

The fact constraining that only leader Nodes should be able to send messages
seems to over-constrain the model, as no instances are generated by the 'show'
predicate when it is included. I have not found the reason that this is
over-constraining.

The 'ConsensusAfterUpdate' assertion holds, which makes me believe that the
'Update' predicate is correct and 'Consensus' will hold after an update; however
when running the 'show' predicate it is possible that a model is generated which
does not meet 'Consensus'.
